{"version":3,"sources":["services/persons.js","components/Search.js","components/AddPerson.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["url","axios","get","phonebookObj","post","id","delete","then","response","data","newPhonebookObj","put","Search","searchName","handleSearch","value","onChange","AddPerson","newName","newNumber","handlePhonebookName","handlePhonebookNumber","addPhonebook","onSubmit","type","Persons","persons","deletePhonebook","map","person","key","name","number","onClick","Notification","notification","content","className","App","useState","setPersons","setNewName","setNewNumber","setSearchName","setNotification","useEffect","services","console","log","e","target","preventDefault","exist","filter","length","concat","catch","error","setTimeout","findPerson","find","updateNumber","window","confirm","toLowerCase","includes","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.993a9a0b.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst url = 'http://localhost:3001/persons';\r\n\r\nconst getPersons = () => {\r\n    return axios.get(url)\r\n}\r\n\r\nconst addPerson = (phonebookObj) => {\r\n    return axios.post(url, phonebookObj)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then(response =>response.data)\r\n}\r\n\r\nconst updateNumber = (id, newPhonebookObj) => {\r\n    const request = axios.put(`${url}/${newPhonebookObj.id}`, newPhonebookObj)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getPersons, addPerson, deletePerson, updateNumber }","import React from 'react'\r\n\r\nexport const Search = ({ searchName, handleSearch }) => {\r\n    return (\r\n        <div>\r\n            Search by name: <input value={searchName} onChange={handleSearch} />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport const AddPerson = ({ newName, newNumber, handlePhonebookName, handlePhonebookNumber, addPhonebook }) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={addPhonebook}>\r\n            <div>\r\n            Name: <input value={newName} onChange={handlePhonebookName}/>\r\n            </div>\r\n            <div>\r\n            Number: <input value={newNumber} onChange={handlePhonebookNumber}/>\r\n            </div>\r\n            <div>\r\n            <button type=\"submit\">Add</button>\r\n            </div>\r\n        </form>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport const Persons = ({ persons, deletePhonebook }) => {\r\n    return (\r\n        <>\r\n        {\r\n            persons.map((person) => (\r\n              <div key={person.id}>\r\n                <p>{person.name}: {person.number}</p><button onClick={() => deletePhonebook(person.id)}>Delete</button>\r\n              </div>\r\n            ))\r\n          }\r\n          </>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport const Notification = ({ notification }) => {\r\n\r\n    if(notification.content === null) {\r\n        return null;\r\n    }\r\n    return (\r\n        <>\r\n            <div className={notification.type === 'success' ? 'notification' : 'error'}>{ notification.content }</div>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react';\nimport services from './services/persons';\nimport './App.css'\n\nimport { Search } from './components/Search';\nimport { AddPerson } from './components/AddPerson';\nimport { Persons } from './components/Persons';\nimport { Notification } from './components/Notification';\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchName, setSearchName] = useState('');\n  const [notification, setNotification] = useState({content: null, type: null});\n\n  useEffect(() => {\n    services\n      .getPersons()\n     .then(response => {\n       setPersons(response.data)\n       console.log(response.data)\n     })\n  }, [])\n\n  const handlePhonebookName = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handlePhonebookNumber = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const addPhonebook = (e) => {\n    e.preventDefault()\n\n    const exist = persons.filter(person => person.name === newName);\n\n    if(exist.length === 0) {\n      const phonebookObj = {\n        name: newName,\n        number: newNumber,\n      }\n\n      services\n        .addPerson(phonebookObj)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n        })\n        .catch(error => {\n          setNotification({content: error.response.data, type: notification})\n        })\n      setNewName('')\n      setNewNumber('')\n      setNotification({content: `${phonebookObj.name} has been added to the phonebook`, type: 'success'})\n      setTimeout(() => {\n        setNotification({content: null})\n      }, 3000);\n    } else {\n      const findPerson = persons.find(person => person.id === exist[0].id);\n      const updateNumber = { ...findPerson, number: newNumber };\n      if(window.confirm(`Update ${updateNumber.name} phone number?`)) {\n        services\n        .updateNumber(updateNumber.id, updateNumber)\n        .then(response => {\n          setPersons(persons.map(person => (person.id !== updateNumber.id ? person : updateNumber)))\n          setNewName('')\n          setNewNumber('')\n          setNotification({content:`${updateNumber.name}  number has been updated`, type: 'success'})\n          setTimeout(() => {\n            setNotification({content: null})\n          }, 3000);\n        })\n        .catch(error => {\n          setNotification({content: `${updateNumber.name} was already deleted`, type: 'error'})\n          setTimeout(() => {\n            setNotification({content: null})\n          }, 3000)\n        })\n      }\n    }\n   \n  }\n\n  const deletePhonebook = (id) => {\n    const personToDelete = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n    services\n      .deletePerson(id)\n      .then((response) => {\n        setPersons(persons.filter(person => person.id !== id))\n      });\n      setNotification({content: `${personToDelete.name}  has been deleted`, type: 'error'})\n          setTimeout(() => {\n            setNotification({content: null})\n          }, 3000);\n    }\n  }\n\n  const handleSearch = (e) => {\n    setSearchName(e.target.value)\n  }\n\n  const results = () => {\n    if(searchName === '') {\n      return persons;\n    }\n    return [...persons].filter(\n      person => person.name.toLowerCase().includes(searchName.toLowerCase())\n    )\n  }\n  \n  return (\n    <>\n    <Notification notification={notification}/>\n      <h2>Phonebook</h2>\n      <AddPerson \n        newName={newName} \n        handlePhonebookName={handlePhonebookName} \n        newNumber={newNumber} \n        handlePhonebookNumber={handlePhonebookNumber} \n        addPhonebook={addPhonebook}\n      />\n      <h2>Numbers</h2>\n      <Search searchName={searchName} handleSearch={handleSearch} /> \n      <Persons  persons={results()} deletePhonebook={deletePhonebook}/>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}